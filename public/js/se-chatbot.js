!function(){"use strict";(async()=>{const t="se-open-state",e="se-open-timestamp",n=window.innerWidth<=768,a=()=>{if(SE_RWC_SETTINGS)return SE_RWC_SETTINGS},o=(t,e)=>{console.error(`[SEChat Plugin] unable to load chatbot: ${t}`),e&&console.error(e)},i=(t,e,n,a,o)=>{t&&(o&&n(t[a]),t.addEventListener(e,(t=>n(t.target[a]))))},c=()=>{window.SEChatbot.openChat()},r=async()=>{const t=(()=>{if(SE_RWC_SCRIPT_LOCATION)return SE_RWC_SCRIPT_LOCATION})();if(t)try{await import(t)}catch(t){return void o("richWebChat.umd.min.js could not be imported",t)}else o("richWebChat.umd.min.js not found")},s=()=>{const t=window.richWebChat.default;if(!t)return void o("richWebChat is undefined");const e=(()=>{if(SE_RWC_OPTIONS)return SE_RWC_OPTIONS})();if(!e)return void o("chat options not provided");const n=new t(Object.assign(e,{container:"#staffing-engine-chatbot",pageData:{url:window.location.href}}));window.SEChatbot=n},d=()=>{try{if("new"===(()=>{if(SE_RWC_VERSION)return SE_RWC_VERSION})()){const t=window.SEChatbot,e=document.querySelector("#staffing-engine-chatbot button.rwc-embed__close-btn");i(e,"click",(()=>t.runGlobalCommand({name:"closeChat"})))}else{const t=window.richWebChat.Sdk,e=document.querySelector('#staffing-engine-chatbot button[aria-label="Close chat"]');i(e,"click",(()=>t.sendGlobalCommand({name:"close"})))}}catch(t){o("failed to register global command listeners",t)}},l=()=>{try{const t=a().thumbIconSize;if(t&&"default"!==t){const e=document.querySelector("#staffing-engine-chatbot .rwc-embed-thumb");if(!e)return;e.classList.add(`se-chatbot-thumb--${t}`)}}catch(t){o("failed to apply chatbot settings",t)}},u=async()=>{try{await(i=document.querySelector("#staffing-engine-chatbot"),r="rwc-embed-thumb",new Promise((t=>{const e=new MutationObserver((n=>{n.forEach((n=>{n.target.className.includes(r)&&(e.disconnect(),t())}))}));e.observe(i,{subtree:!0,childList:!0})})));const o=localStorage.getItem(t),s=((t,e)=>{if(void 0===t)return!1;if(!e)return!1;const n=new Date;return n.setUTCDate(n.getUTCDate()-1),new Date(e)>=n})(o,localStorage.getItem(e));if(s&&"closed"===o)return;if(s&&"open"===o)return void c();if((()=>{const t=a();return"disable"!==t.autoExpandState&&("enable-not-mobile"!==t.autoExpandState||!n)&&0!==t.autoExpandDelay})()){const t=a().autoExpandDelay;if(!t||0===t)return;setTimeout((()=>{c()}),t)}}catch(t){o("failed to manage open state",t)}var i,r},h=async()=>{await r(),await s(),d(),(()=>{try{const n=window.richWebChat.Sdk,a=t=>t.isOpen?"open":"closed";n.on("toggle-chat-window",(n=>{localStorage.setItem(t,a(n)),localStorage.setItem(e,(new Date).toUTCString())}))}catch(t){o("failed to register chat state listener",t)}})(),l(),await u()};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(async()=>{await h()}),!1):await h()})()}();
